/*
** Count the slots of each size.
*/
create or replace view view_cloud_status_slots as
select
substring_index(machine,'--',1) as group_name,
substring_index(substring_index(machine,'--',2),'--',-1) as cloud_name,
slot_CPUs,
count(*) as slot_count
from condor_machines as cm
where  slot_CPUs > 0
group by group_name,cloud_name,slot_CPUs
;
