/*
** Count the slots of each size.
*/
create or replace view view_cloud_status_slot_detail as
select
group_name,
cloud_name,
concat(substring(substring_index(name,'@',1),5), ':', slot_CPUs) as slot_tag,
substring(substring_index(name,'@',1),5) as slot_id,
slot_CPUs as slot_type,
sum(1) as slot_count,
sum(slot_CPUs) as core_count
from condor_machines as cm
where  state="Claimed"
group by group_name,cloud_name,slot_tag
order by group_name,cloud_name,slot_CPUs desc,slot_tag
;
