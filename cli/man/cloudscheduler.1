.so ../man/_header.so
.
.
.\" --------------------------------------------------------------------
.SH SYNOPSIS
.\" --------------------------------------------------------------------
.

The general format of the \fBcloudscheduler\fP command is as follows:

.
.SY cloudscheduler
.B <object>
.B <action>
.B [ <mandatory_parameters_and_options> ]
.
.YS
.
.
.\" --------------------------------------------------------------------
.SH DESCRIPTION
.\" --------------------------------------------------------------------
.
The \fBcloudscheduler\fP command line interface makes RESTful requests to cloudscheduler servers to retrieve
information and control batch processing on clouds.
It is an alternative to the web browser interface, providing the same functionality, and like
the wed browser interface can talk to any number of servers.

CSV2 servers require authentication.
One of two methods of authentication must be used when communicating with servers;
either username and password credentials, or an X509 certificate may be used.
Accounts and associated credentials are set up by any privileged user, but any user can
change their own password.

The \fBcloudscheduler\fP command provides the \fBdefaults\fP object together with its' associated
actions to manage default values for servers on a server by server basis.
Server location (URL), credential parameters, mandatory parameters, and other options 
are grouped under a "server" name.
The "default" server is always and automatically defined.

Parameters come in two flavours, keyword/value and boolean.
Keyword parameters have no default value, whereas boolean values default to \fBFalse\fP.
When a group of settings is saved for a server, it will contain all the boolean values, but
only those keywords that have been explicitly set.
Specifying a boolean keyword more than once will toggle its' value from \fBFalse\fp to
\fBTrue\fP and back to \fBFalse\fP, etc.
A default value can be saved in the \fBsettings\fP but overridden on the command line.

.
.\" --------------------------------------------------------------------
.SH OBJECTS
.\" --------------------------------------------------------------------
.P
The first two positional arguments to the \fBcloudscheduler\fP command are  an \fBobject\fP 
and an \fBaction\fP to be perfomed.
For information about the actions associated with a particular object, refer
to the documentation for that object (eg. cloudscheduler <object> -H).
The following is a list and brief description of the available objects:

.
.TP
.BI cloud
This object adds, deletes, creates, lists, modifies, and shows the status of clouds 
within a group.
For each group, one or more cloud resources, both commercial and private, can be 
defined.
Defining cloud resouces for a group allows cloudscheduler to manage those resources
for the group, starting and stopping Virtual Machines as required by the group's
job queue.
The cloud object and actions are available to all users.

.
.TP
.BI defaults
This object manipulates groups of settings within a user's \fB~/.csv2\fP directory,
and provides actions to save, list, update, and delete settings for multiple servers.
A sub-directory is created for each server, and within that sub-directory, a single 
\fBsettings.yaml\fP file contains the default value for each parameter for that server.
The settings object and actions are available to all users.

.
.TP
.BI group
This object creates, lists, updates, and deletes groups on \fBcloudscheduler\fp servers.
A group on a cloudscheduler server is analogous to a project on an OpenStack cloud and 
may have multiple users, anyone of whom may control the cloud resources
for the group.
The group object and actions are only available to privileged users.

.
.TP
.BI helpers
This object provides functions to aid in the use of this command, eg. action
"generate_bash_completion_script" writes a bash script to standard out which can
be installed in "/etc/bash_completion.d/cloudscheduler" and will provde command 
parameter tab completion.

.
.TP
.BI job

.
.TP
.BI user
This object creates, lists, updates, and deletes users on \fBcloudscheduler\fp servers.
Each user will be assigned to one or more groups, and will be able to manipulate
the resources for the groups to which they are assigned.
The user object and actions are only available to privileged users.
.

.
.TP
.BI vm

.
.
.\" --------------------------------------------------------------------
.SH GLOBAL OPTIONS
.\" --------------------------------------------------------------------
.P
The following global options are applicable to all \fBcloudscheduler\fP commands:
.
.\" --------------------------------------------------------------------
.SS Authentication Options
.\" --------------------------------------------------------------------
.
The following options are used to address the cloudscheduler server and to identify the user to the server:
.
.TP
.OP \-sa\ \:|\ --server-address <URL>
Specifies the HTTPS protocol location of the cloudscheduler server. The default URL is https://localhost.
.
.TP
.OP \-sC\ \:|\ --server-grid-cert <path_to_grid_certificate_file>
Specifies the location of an x509 grid certificate used to identify the user to the cloudscheduler server.
There is no default.
If specified, the user must also specify the 
.OP \-k key
option, in which case certificate authentication will be used and the
.OP \-u user
and the
.OP \-p password
options will be ignored.
.
.TP
.OP \-sK\ \:|\ --server-grid-key <path_to_grid_certificate_key_file>
Specifies the location of an x509 grid certificate key used to identify the user to the cloudscheduler server.
There is no default.
If specified, the user must also specify the 
.OP \-c cert
option, in which case certificate authentication will be used and the
.OP \-u user
and the
.OP \-p password
options will be ignored.
.
.TP
.OP \-su\ \:|\ --server-user <username>
Specifies the user ID to use when authenticating with the cloudscheduler server.
There is no default.
If specified, the user must also specify the 
.OP \-p password
option, or a password promp will be issued.
This option, together with the
.OP \-p password
option will be ignored if certificate authentication is being used.
.
.TP
.OP \-spw\ \:|\ --server-password <password>
Specifies the password to use when authenticating with the cloudscheduler server.
If user/password authentication is being used and no password is provided, a password prompt will be issued.
This option, together with the
.OP \-u user
option will be ignored if certificate authentication is being used.
.
.TP
In summary, the user must provide either of the following when communicating with a cloudscheduler server:
.
.RS
.TP
.BI *
[ \fB\:-sa\fP \fI<URL>\fP ], [ \fB\:-sC\fP \fI<path_to_grid_certificate_file>\fP ], and [ \fB\:-sK\fP \fI<path_to_grid_certificate_key_file>\fP ], or
.TP
.BI *
[ \fB\:-sa\fP \fI<URL>\fP ], [ \fB\:-su\fP \fI<username>\fP ], and [ \fB\:-spw\fP \fI<password>\fP ]
.RE
.
.
.TP
However, if the [ \fB\-S\fP \fIurl\fP ] option is omitted, a default URL of https://localhost will be used.
.
.\" --------------------------------------------------------------------
.SS Information Options
.\" --------------------------------------------------------------------
.
The following options are used to display the \fBcloudscheduler\fP command line interface and API documentation:
.
.TP
.OP \-h\ \:|\ --help
Requests short help for the current command.
Help can be requested for the \fBcloudscheduler\fP command, a specific object, or a specific object/action.
.
.TP
.OP \-H\ \:|\ --long-help
Requests the man page style help for the current command.
Long help can be requested for the \fBcloudscheduler\fP command, a specific object, or a specific object/action.
.
.TP
.OP \-xA\ \:|\ --expose-API
Requests trace messages detailing the API calls and responses issued and received by the \fBcloudscheduler\fP command.
.
