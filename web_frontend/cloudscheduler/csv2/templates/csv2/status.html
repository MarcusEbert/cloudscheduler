{% block navbar %}
   {% include "csv2/navigation_bar.html" %}
{% endblock %}

<head>
{% load static %}
{% load template_utils %}
{% load mathfilters %}

<link rel="stylesheet" type="text/css" href="{% static "csv2/common.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "csv2/status.css" %}">

<meta id="refresher" http-equiv="refresh" content="30">

<script type="text/javascript">
    var TimerSwitch = 1;

    function set_refresh(time) {
        TimerSwitch = 1;
        setTimeout(function() {
            location.reload();
        },time);

        document.getElementById('vms-iframe').src='';
    }

    function stop_refresh() {
        TimerSwitch = 0;
        window.stop();
    }

    function pass_url(url) {
        stop_refresh();
        document.getElementById('vms-iframe').src='/vm/list/'+url;
    }
</script>
</head>

<body class="status-nav">


{% if err_message is not None %}
    <p style="color:red;">{{err_message}}</p>
{% endif %}
{% if message is not None %}
    <p style="color:green;">{{message}}</p>
{% endif %}


<div class="status-div">

    <div class="toggle-button">
        <label for="toggle-row">
            <img src="{% static "csv2/expand.svg" %}" alt="expand rows">
        </label>
    </div>

    <div class="status-table">
        <table>
          <colgroup>
            <col class="red" span="1" />
            <col class="clear" span="5" />

          </colgroup>
          <thead>
            <tr class="header-row">
                <th class="jobs-style">Jobs</th>
                <th class="jobs-style">Idle</th>
                <th class="jobs-style">Running</th>
                <th class="jobs-style">Completed</th>
                <th class="jobs-style">Held</th>
                <th class="jobs-style">Other</th>

            </tr>
            {% for cloud in job_status_list %}
                <tr>

                    {% if cloud.Jobs == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Jobs}}</a></td>
                    {% endif %}

                    {% if cloud.Idle == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Idle}}</a></td>
                    {% endif %}

                    {% if cloud.Running == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Running}}</a></td>
                    {% endif %}

                    {% if cloud.Completed == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Completed}}</a></td>
                    {% endif %}

                    {% if cloud.Held == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Held}}</a></td>
                    {% endif %}

                    {% if cloud.Other == 0 %}
                        <td class="zero-style">0</td>
                    {% else %}
                        <td class="more-style"><a href="#">{{cloud.Other}}</a></td>
                    {% endif %}

                </tr>
            {% endfor %}

            <tr class="bottom-row">
                <td colspan="6"></td>
            </tr>

            </tbody> 
        </table>
    </div>



    <!--
    https://codepen.io/istro/pen/daker 
    https://codersblock.com/blog/checkbox-trickery-with-css/
    -->

    <!--
    <input id="how-other" name="how" type="radio">
    <label for="how-other" class="side-label">Other...</label>

    <div class="how-other-disclosure">
      <label for="how-other-explain" class="top-label">Please explain</label>
      <textarea id="how-other-explain"></textarea>
    </div>
    -->



    <br>
    {% set VMstotal = 0 %}
    {% set VMs_foreign_total = 0 %}
    <div class="status-table">
        <input class="toggle-box" id="toggle-row" type="checkbox" autocomplete="on"></input>

        <table>
          <colgroup>
            <col class="grey" span="1"/>
            <col class="clear" span="22" />
          </colgroup>
          <thead>
            <tr class="header-row">
                <th class="name-style">Clouds</th>
                <th class="native-style">VMs</th>
                <th class="native-style">Starting</th>
                <th class="native-style">Unreg.</th>
                <th class="native-style">Idle</th>                
                <th class="native-style">Running</th>
                <th class="native-style">Retiring</th>
                <th class="native-style">Manual</th>
                <th class="native-style">Error</th>

                <th class="col-spacer">&nbsp;</th>


                <th class="native-style" colspan="2">
                    <table>
                        <tr colspan="2">Native Cores</tr>
                        <tr>
                            <th>Used</th>
                            <th>Limit</th>
                        </tr>
                    </table>
                </th>
                <th class="native-style">RAM</th>

                <th class="col-spacer">&nbsp;</th>

                <th class="foreign-style">Foreign<br>VMs</th>
                <th class="foreign-style">Foreign<br>Cores</th>
                <th class="foreign-style">RAM</th>

                <th class="col-spacer">&nbsp;</th>


                <th class="total-style" colspan="2">
                    <table>
                        <tr colspan="2">Global Cores</tr>
                        <tr>
                            <th>Used</th>
                            <th>Quota</th>
                        </tr>
                    </table>
                </th>
                <th class="total-style">RAM</th>


                <th class="col-spacer">&nbsp;</th>

                <th class="native-style">Slots</th>
                <th class="native-style" colspan="2">
                    <table>
                        <tr colspan="2">Slot Cores</tr>
                        <tr>
                            <th>Busy</th>
                            <th>Idle</th>
                        </tr>
                    </table>
                </th>

                <!--
                <th class="native-style">Slots<br>Used Cores</th>
                <th class="native-style">Slots<br>Idle Cores</th>
                -->
            </tr>
            {% for cloud in cloud_status_list %}

                {% if cloud.enabled == 1 or cloud.VMs > 0 %}
                    <tr>
                    {% if cloud.enabled == 1 %}
                        <td class="title-style">
                    {% else %}
                        <td class="disabled-style">
                    {% endif %}
                        <a onclick="pass_url('{{cloud.cloud_name}}::::')" href="#vms-overlay">{{cloud.cloud_name}}</a></td>

                        {% if cloud.VMs == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::native::')" href="#vms-overlay">{{cloud.VMs}}</a></td>
                        {% endif %}

                        {% if cloud.VMs_starting == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::starting::')" href="#vms-overlay">{{cloud.VMs_starting}}</a></td>
                        {% endif %}


                        {% if cloud.VMs_unregistered == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::unregistered::')" href="#vms-overlay">{{cloud.VMs_unregistered}}</a></td>
                        {% endif %}


                        {% if cloud.VMs_idle == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::idle::')" href="#vms-overlay">{{cloud.VMs_idle}}</a></td>
                        {% endif %}


                        {% if cloud.VMs_running == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::running::')" href="#vms-overlay">{{cloud.VMs_running}}</td>
                        {% endif %}


                        {% if cloud.VMs_retiring == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::retiring::')" href="#vms-overlay">{{cloud.VMs_retiring}}</td>
                        {% endif %}


                        {% if cloud.VMs_manual == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::manual::')" href="#vms-overlay">{{cloud.VMs_manual}}</td>
                        {% endif %}


                        {% if cloud.VMs_in_error == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::error::')" href="#vms-overlay">{{cloud.VMs_in_error}}</td>
                        {% endif %}



                        <td class="col-spacer">&nbsp;</td>


                        {% if cloud.cores_native == 0 %}
                            <td class="zero-style">0</td>
                        {% elif cloud.cores_ctl == -1 %}
                            <td class="sysctl-style">{{cloud.cores_native}}</td>
                        {% else %}
                            <td class="manual-style">{{cloud.cores_native}}</td>
                        {% endif %}

                        {% if cloud.cores_limit == 0 %}
                            <td class="zero-style">0</td>
                        {% elif cloud.cores_ctl == -1 %}
                            <td class="sysctl-style">{{cloud.cores_limit}}</td>
                        {% else %}
                            <td class="manual-style">{{cloud.cores_limit}}</td>
                        {% endif %}
                        
                        <td>
                            {% with total=cloud.ram_quota %}
                                <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_native }}"></meter>
                            {% endwith %}
                        </td>


                        <td class="col-spacer">&nbsp;</td>


                        {% if cloud.Foreign_VMs == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style"><a onclick="pass_url('{{cloud.cloud_name}}::foreign::')" href="#vms-overlay">{{ cloud.Foreign_VMs }}</a></td>
                        {% endif %}



                        {% if cloud.cores_foreign == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{ cloud.cores_foreign }}</a></td>
                        {% endif %}

                        <td>
                            {% with total=cloud.ram_quota %}
                                <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_foreign }}"></meter>
                            {% endwith %}
                        </td>

                        <td class="col-spacer">&nbsp;</td>


                        <!--******************************-->
                        {% if cloud.cores_native_foreign == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{ cloud.cores_native_foreign }}</a></td>
                        {% endif %}
                        <!--******************************-->


                        {% if cloud.cores_max == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{ cloud.cores_quota }}</a></td>
                        {% endif %}

                        <td>
                            {% with total=cloud.ram_quota %}
                                <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_native_foreign }}"></meter>
                            {% endwith %}                        
                        </td>

                        <td class="col-spacer">&nbsp;</td>

                        {% if cloud.slot_count == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{cloud.slot_count}}</td>
                        {% endif %}


                        {% if cloud.slot_core_count == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{cloud.slot_core_count}}</td>
                        {% endif %}

                        {% if cloud.slot_idle_core_count == 0 %}
                            <td class="zero-style">0</td>
                        {% else %}
                            <td class="more-style">{{cloud.slot_idle_core_count}}</td>
                        {% endif %}

                        

                    </tr>



                    <tr class="extra-row">
                        <td></td>
                        <td><!--VMs--></td>
                        <td><!--Starting--></td>
                        <td><!--Unreg.--></td>
                        <td><!--Idle--></td>                
                        <td><!--Running--></td>
                        <td><!--Retiring--></td>
                        <td><!--Manual--></td>
                        <td><!--Error--></td>

                        <td class="col-spacer">&nbsp;</td>

                        <td colspan="2">
                        {% if cloud.cores_ctl == -1 %}
                            <p>Using System Limit</p>
                        {% else %}
                            <p>Using User Limit</p>
                        {% endif %}
                        </td>
                        <td>
                            {% with ram=cloud.ram_native total=cloud.ram_quota %}
                                {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                            {% endwith %}
                        </td>

                        <td class="col-spacer">&nbsp;</td>

                        <td><!--Foreign VMs--></td>
                        <td><!--Foreign Cores--></td>
                        <td>
                            {% with ram=cloud.ram_foreign total=cloud.ram_quota %}
                                {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                            {% endwith %}
                        </td>
                        <td class="col-spacer">&nbsp;</td>

                        <td><!--Total Cores--></td>
                        <td><!--Cores Quota--></td>
                        <td>
                            {% with ram=cloud.ram_native_foreign total=cloud.ram_quota %}
                                {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                            {% endwith %}
                        </td>
                        <td class="col-spacer">&nbsp;</td>

                        <td colspan="2">
                            <table>
                            {% for slot in slot_list%}
                                {% if slot.group_name == active_group and slot.cloud_name == cloud.cloud_name %}
                                    <tr>
                                        <td>{{ slot.slot_count }}&#10005;{{ slot.slot_type }}c</td>
                                        <td>{{ slot.core_count }}@{{ slot.slot_id }}</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                            </table>
                        </td>
                        <td><!--Idle--></td>

                    </tr>                
                {% endif %}

            {% endfor %}

            <!--
            {% for cloud in cloud_status_list %}
                {% if cloud.enabled == 0 and cloud.VMs == 0 %}
                    <tr class="extra-row">
                        <td class="disabled-style">{{cloud.cloud_name}}</td>
                        <td colspan="22"><h3>--- disabled ---</h3></td>
                    </tr>        

                {% endif %}
            {% endfor %}
            -->
            <tr>
                <td colspan="9" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
            </tr>
             <tr>
                <td class="bold-style">Totals:</td>

                {% if cloud_total_list.VMs == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::native::')" href="#vms-overlay">{{cloud_total_list.VMs}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_starting == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::starting::')" href="#vms-overlay">{{cloud_total_list.VMs_starting}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_unregistered == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::unregistered::')" href="#vms-overlay">{{cloud_total_list.VMs_unregistered}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_idle == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::idle::')" href="#vms-overlay">{{cloud_total_list.VMs_idle}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_running == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::running::')" href="#vms-overlay">{{cloud_total_list.VMs_running}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_retiring == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::retiring::')" href="#vms-overlay">{{cloud_total_list.VMs_retiring}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_manual == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::manual::')" href="#vms-overlay">{{cloud_total_list.VMs_manual}}</a></td>
                {% endif %}


                {% if cloud_total_list.VMs_in_error == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::error::')" href="#vms-overlay">{{cloud_total_list.VMs_in_error}}</a></td>
                {% endif %}



                <td class="col-spacer">&nbsp;</td>


                {% if cloud_total_list.cores_native == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style">{{cloud_total_list.cores_native}}</td>
                {% endif %}

                {% if cloud_total_list.cores_limit == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style">{{cloud_total_list.cores_limit}}</td>
                {% endif %}
                    <td>
                        {% with total=cloud_total_list.ram_quota %}
                            <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud_total_list.ram_quota}}" value="{{ cloud_total_list.ram_native }}"></meter>
                        {% endwith %}
                    </td>

                <td class="col-spacer">&nbsp;</td>

                {% if cloud_total_list.Foreign_VMs == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a onclick="pass_url('::foreign::')" href="#vms-overlay">{{cloud_total_list.Foreign_VMs}}</a></td>
                {% endif %}


                {% if cloud_total_list.cores_foreign == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style"><a href="#">{{cloud_total_list.cores_foreign}}</a></td>
                {% endif %}

                    <td>
                        {% with total=cloud_total_list.ram_quota %}
                            <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud_total_list.ram_quota}}" value="{{ cloud_total_list.ram_foreign }}"></meter>
                        {% endwith %}
                    </td>

                <td class="col-spacer">&nbsp;</td>
                <!--*******************************************************-->
                <td class="bold-style">{{cloud_total_list.cores_native_foreign}}</td>
                <!--*******************************************************-->

                <td class="bold-style">{{cloud_total_list.cores_quota}}</td>

                <td>
                    {% with total=cloud_total_list.ram_quota %}
                        <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud_total_list.ram_quota}}" value="{{ cloud_total_list.ram_native_foreign }}"></meter>
                    {% endwith %}
                </td>

                <td class="col-spacer">&nbsp;</td>

                {% if cloud_total_list.slot_count == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style">{{cloud_total_list.slot_count}}</td>
                {% endif %}


                {% if cloud_total_list.slot_core_count == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style">{{cloud_total_list.slot_core_count}}</td>
                {% endif %}

                {% if cloud_total_list.slot_idle_core_count == 0 %}
                    <td class="zero-style">0</td>
                {% else %}
                    <td class="more-style">{{cloud_total_list.slot_idle_core_count}}</td>
                {% endif %}

            </tr>


            <tr class="extra-row">
                <td></td>
                <td><!--VMs--></td>
                <td><!--Starting--></td>
                <td><!--Unreg.--></td>
                <td><!--Idle--></td>                
                <td><!--Running--></td>
                <td><!--Retiring--></td>
                <td><!--Manual--></td>
                <td><!--Error--></td>

                <td class="col-spacer">&nbsp;</td>

                <td><!--Used Cores--></td>
                <td><!--Cores Limit--></td>
                <td>
                    {% with ram=cloud_total_list.ram_native total=cloud_total_list.ram_quota %}
                        {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                    {% endwith %}
                </td>
                <td class="col-spacer">&nbsp;</td>

                <td><!--Foreign VMs--></td>
                <td><!--Foreign Cores--></td>
                <td>
                    {% with ram=cloud_total_list.ram_foreign total=cloud_total_list.ram_quota %}
                        {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                    {% endwith %}                    
                </td>
                <td class="col-spacer">&nbsp;</td>

                <td><!--Total Cores--></td>
                <td><!--Cores Quota--></td>
                <td>
                    {% with ram=cloud_total_list.ram_native_foreign total=cloud_total_list.ram_quota %}
                        {{ ram|div:1024 }} / {{ total|div:1024 }} GB
                    {% endwith %}                    
                </td>
                <td class="col-spacer">&nbsp;</td>

                <td colspan="2">
                    <table>
                    {% for slot in slot_total_list%}
                        {% if slot.group_name == active_group and slot.cloud_name == cloud_total_list.cloud_name %}
                            <tr>
                                <td>{{ slot.slot_count }}&#10005;{{ slot.slot_type }}c</td>
                                <td>{{ slot.core_count }}@{{ slot.slot_id }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                    </table>
                </td>
                <td><!--Idle--></td>


            <tr class="bottom-row">
                <td colspan="9" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
                <td class="col-spacer">&nbsp;</td>
                <td colspan="3" class="row-spacer">&nbsp;</td>
            </tr>

            </tbody> 
        </table>
    </div>
</div>


<div class="system-div">
    <table class="system-services">
        <!--<colgroup>
        <col class="red" span="1" />
        <col class="clear" span="5" />

        </colgroup>-->
        <thead>
            <tr>
                <th colspan="7">CS system services</th>
                <th class="col-spacer">&nbsp;</th>
                <th colspan="4">CS system resources</th>
            </tr>

            <tr>
                <td tooltip="{{ system_list.csv2_status_msg }}">
                {% if system_list.csv2_status_status == 1 %}
                    <span class="green-dot"></span></td>
                {% else %}
                    <span class="red-dot"></span></td>
                {% endif %}

                <td tooltip="{{ system_list.csv2_main_msg }}">
                {% if system_list.csv2_main_status == 1 %}
                    <span class="green-dot"></span></td>
                {% else %}
                    <span class="red-dot"></span></td>
                {% endif %}

                <td tooltip="{{ system_list.mariadb_msg }}">
                {% if system_list.mariadb_status == 1 %}
                    <span class="green-dot"></span></td>
                {% else %}
                    <span class="red-dot"></span></td>
                {% endif %}


                {% if system_list.csv2_openstack_status == 1 and system_list.csv2_openstack_error_count == 0%}
                    <td tooltip="{{ system_list.csv2_openstack_msg }}">
                    <span class="green-dot"></span></td>
                {% elif system_list.csv2_openstack_status == 1 and system_list.csv2_openstack_error_count != 0%}
                    <td tooltip="Warning! {{system_list.csv2_openstack_error_count}} child process failures. {{ system_list.csv2_openstack_msg }}">
                    <span class="orange-dot"></span></td>
                {% else %}
                    <td tooltip="{{ system_list.csv2_openstack_msg }}">
                    <span class="red-dot"></span></td>
                {% endif %}


                {% if system_list.csv2_jobs_status == 1 and system_list.csv2_jobs_error_count == 0%}
                    <td tooltip="{{ system_list.csv2_jobs_msg }}">
                    <span class="green-dot"></span></td>
                {% elif system_list.csv2_jobs_status == 1 and system_list.csv2_jobs_error_count != 0%}
                    <td tooltip="Warning! {{system_list.csv2_jobs_error_count}} child process failures. {{ system_list.csv2_jobs_msg }}">
                    <span class="orange-dot"></span></td>
                {% else %}
                    <td tooltip="{{ system_list.csv2_jobs_msg }}">
                    <span class="red-dot"></span></td>
                {% endif %}


                {% if system_list.csv2_machines_status == 1 and system_list.csv2_machines_error_count == 0%}
                    <td tooltip="{{ system_list.csv2_machines_msg }}">
                    <span class="green-dot"></span></td>
                {% elif system_list.csv2_machines_status == 1 and system_list.csv2_machines_error_count != 0%}
                    <td tooltip="Warning! {{system_list.csv2_machines_error_count}} child process failures. {{ system_list.csv2_machines_msg }}">
                    <span class="orange-dot"></span></td>
                {% else %}
                    <td tooltip="{{ system_list.csv2_machines_msg }}">
                    <span class="red-dot"></span></td>
                {% endif %}



                <td tooltip="{{ system_list.condor_msg }}">
                {% if system_list.condor_status == 1 %}
                    <span class="green-dot"></span></td>
                {% else %}
                    <span class="red-dot"></span></td>
                {% endif %}


                <td class="col-spacer">&nbsp;</td>

                <td tooltip="{{ system_list.load }}%"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.load }}"></meter></td>

                <td tooltip="{{ system_list.ram_used }} / {{ system_list.ram_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.ram }}"></meter></td>
 
                <td tooltip="{{ system_list.swap_used }} / {{ system_list.swap_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.swap }}"></meter></td>

                <td tooltip="{{ system_list.disk_used }} / {{ system_list.disk_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.disk }}"></meter></td>

            </tr>
            <tr>
                <td>status</td>
                <td>main</td>
                <td>database</td>
                <td>openstack</td>
                <td>jobs</td>
                <td>machines</td>
                <td>condor</td>

                <td class="col-spacer">&nbsp;</td>


                <td>LOAD</td>
                <td>RAM</td>
                <td>SWAP</td>
                <td>DISK</td>
            </tr>



        </tbody> 
    </table>

    <div class="refresh-button">
        <div id="CDTimer">???</div>
        <img src="{% static "csv2/refresh.svg" %}" alt="Refresh now" onClick="window.location.reload()"> 
        <img src="{% static "csv2/stop.svg" %}" alt="Stop refresh" onClick="stop_refresh()">
    </div>
</div>




<div id="vms-overlay" class="overlay">
    <div class="popup">
        <a class="close" onclick="set_refresh('30000')" href="#">&times;</a>
        <iframe id="vms-iframe" class="content" src=""></iframe>
    </div>
</div>



<script type="text/javascript">

    /*<![CDATA[*/
    var TimerVal = 30;
    var TimerSPan = document.getElementById("CDTimer");
    function CountDown(){
       setTimeout( "CountDown()", 1000 );
       TimerSPan.innerHTML=TimerVal;
       if(TimerSwitch == 1){TimerVal=TimerVal-1;}
       if (TimerVal<0) { TimerVal=0 }
    } CountDown() 
    /*]]>*/

</script>

</body>
</html>
