{% block navbar %}
   {% include "csv2/navigation_bar.html" %}
{% endblock %}

<head>
{% load static %}
{% load template_utils %}
{% load mathfilters %}
{% csrf_token %}
<input type='hidden' name='refresh_interval' value={{status_refresh_interval}} />
<link rel="stylesheet" type="text/css" href="{% static "csv2/common.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "csv2/status.css" %}">

<!--<meta id="refresher" http-equiv="refresh" content="30">-->
<script type="text/javascript">
var refresh_interval = parseInt(document.getElementsByName('refresh_interval')[0].value);
if (!(typeof(refresh_interval) !== 'undefined')) refresh_interval = 30;
if (refresh_interval == null || refresh_interval == NaN) refresh_interval = 30;
else if (refresh_interval < 1) stop_refresh;
</script>
<script type="text/javascript">
	/* Refresh status table and system services display*/
	var TimerSwitch = 1;
	var timer_id;
	function set_refresh(time) {
		TimerSwitch = 1;
		timer_id = setTimeout(function() {
			refresh_plot();
			fetch(location.href,{	
				method: 'GET',
				headers: {'Accept': 'text/html'},
			})	
			.then(function(response){
				/* Check response status code*/
				if(response.ok){
					return response.text();
				}throw new Error('Could not update status table :( HTTP response not was not OK -> '+response.status);
			})
			.then((html) => {
				var parser = new DOMParser();
				var doc = parser.parseFromString(html, "text/html");
	    		document.getElementById("status").innerHTML = doc.getElementById("status").innerHTML;
				document.getElementById("system-services").innerHTML = doc.getElementById("system-services").innerHTML;
                TimerVal = refresh_interval;
                set_refresh(refresh_interval*1000);
				checkForPlottedTraces();
				initialize();
			})
			.catch((error) => {
				console.warn(error);
                TimerVal = refresh_interval;
                set_refresh(refresh_interval*1000);
			});
			
		},time);
		document.getElementById('vms-iframe').src='';
	}

	function stop_refresh() {
		TimerSwitch = 0;
		clearTimeout(timer_id);
		window.stop();
	}

	function pass_url(url) {
		stop_refresh();
		document.getElementById('vms-iframe').src='/vm/list/'+url;
	}
</script>
</head>

<body class="status-nav">


{% if err_message is not None %}
    <p style="color:red;">{{err_message}}</p>
{% endif %}
{% if message is not None %}
    <p style="color:green;">{{message}}</p>
{% endif %}


<!--Time series plot -->
<div class="plot-div" id="plot" style="display: none; width: 100%; height: 350px;">
	<div id="plotly-TS" style="width: 100%; height: 340px;">
		<!-- CSS loader-->
		<div class="lds-roller" id="loader"><div></div><div></div><div></div><div></div><div></div>
		<div></div><div></div><div></div>
		</div>

	</div>
	<!--Range Selection -->
	<div class="range-dropdown">
		<button id="range-select" class="range-btn" onclick="dropDown()">Last 1 hour<span class="space"></span>
			<span class="caret"></span>
		</button>
		<div id="myDropdown" class="dropdown-content">
			<div class="column minutes">
				<a class="range first" data-from="5" data-to="0">Last 5 minutes</a>
				<a class="range" data-from="15" data-to="0">Last 15 minutes</a>
				<a class="range" data-from="30" data-to="0">Last 30 minutes</a>
				<a class="range selected" data-from="60" data-to="0">Last 1 hour</a>
				<a class="range" data-from="180" data-to="0">Last 3 hours</a>
				<a class="range" data-from="360" data-to="0">Last 6 hours</a>
				<a class="range" data-from="720" data-to="0">Last 12 hours</a>
				<a class="range" data-from="1440" data-to="0">Last 24 hours</a>
			</div>
			<div class="column days">
				<a class="range first" data-from="7" data-to="0">Last 7 days</a>
				<a class="range" data-from="30" data-to="0">Last 30 days</a>
				<a class="range" data-from="60" data-to="0">Last 60 days</a>
				<a class="range" data-from="90" data-to="0">Last 90 days</a>
				<a class="range" data-from="180" data-to="0">Last 6 months</a>
				<a class="range" data-from="365" data-to="0">Last 1 year</a>
				<a class="range" data-from="730" data-to="0">Last 2 years</a>
				<a class="range" data-from="1825" data-to="0">Last 5 years</a>
			</div>
			<div class="column days">
				<a class="range first" data-from="2" data-to="1">Yesterday</a>
				<a class="range" data-from="3" data-to="2">Day before yesterday</a>
				<a class="range" data-from="8" data-to="7">This day last week</a>
				<a class="range" data-from="14" data-to="7">Previous week</a>
				<a class="range" data-from="60" data-to="30">Previous month</a>
				<a class="range" data-from="730" data-to="365">Previous year</a>
			</div>
		</div>
	</div>
	<button id="close-plot" class="close-btn" onclick="TSPlot.hide()">Close Plot
	</button>
</div>


    <div class="status-div" id="status">
    {% comment %}
        {% set index = 0 %}
        {% for group in user_groups %}
        {% if index >= 0 %}
    {% endcomment %}
        <div>
        {% comment %}
            {% if global_flag %}
                <div class="group-name">{{ group|upper }}</div>
            {% else %}
                {% for group in user_groups %}
                    {% if group == active_group %}
                            {% set index = forloop.counter0 %}
                    {% endif%}
                {% endfor %}
            {% endif %}
        {% endcomment %}
      
            
           

            <div class="status-table">
                 <div class="toggle-button">
                <label for="toggle-row">
                    <span class="expand-symbol">&#x21a8;</span>
                    <!--<img src="{% static "csv2/expand.svg" %}" alt="expand rows">-->
                </label>
                </div>
                <table>
                  <colgroup>
                    <col class="clear" span="1" />
                    <col class="red" span="1" />
                    <col class="clear" span="5" />

                  </colgroup>
                    <tr class="header-row">
                        <th class="group-name jobs-style">Group</th>

                        <th class="jobs-style">Jobs</th>
                        <th class="jobs-style">Idle</th>
                        <th class="jobs-style">Running</th>
                        <th class="jobs-style">Completed</th>
                        <th class="jobs-style">Held</th>
                        <th class="jobs-style">Other</th>

                    </tr>
                
                    {% for cloud in job_status_list %}
                        {% if global_flag or not global_flag and cloud.group_name == active_group %}
                            <tr>
                                <td class="group-name bold-style">{{cloud.group_name}}</td>

                                {% if cloud.Jobs == 0 %}
                                    <td data-path="{{cloud.group_name}} jobs" class="zero-style plottable">0</td>
                                {% else %}
                                    <td data-path="{{cloud.group_name}} jobs" class="more-style plottable"><a href="#">{{cloud.Jobs}}</a></td>
                                {% endif %}

                                {% if cloud.Idle == 0 %}
                                    <td tabindex="2" data-path="{{cloud.group_name}} jobs_idle" class="zero-style plottable">0</td>
                                {% else %}
                                    <td tabindex="2" data-path="{{cloud.group_name}} jobs_idle" class="more-style plottable"><a href="#">{{cloud.Idle}}</a></td>
                                {% endif %}

                                {% if cloud.Running == 0 %}
                                    <td data-path="{{cloud.group_name}} jobs_running" class="zero-style plottable">0</td>
                                {% else %}
                                    <td data-path="{{cloud.group_name}} jobs_running" class="more-style plottable"><a href="#">{{cloud.Running}}</a></td>
                                {% endif %}

                                {% if cloud.Completed == 0 %}
                                    <td data-path="{{cloud.group_name}} jobs_completed" class="zero-style plottable">0</td>
                                {% else %}
                                    <td data-path="{{cloud.group_name}} jobs_completed" class="more-style plottable"><a href="#">{{cloud.Completed}}</a></td>
                                {% endif %}

                                {% if cloud.Held == 0 %}
                                    <td data-path="{{cloud.group_name}} jobs_held" class="zero-style plottable">0</td>
                                {% else %}
                                    <td data-path="{{cloud.group_name}} jobs_held" class="more-style plottable"><a href="#">{{cloud.Held}}</a></td>
                                {% endif %}

                                {% if cloud.Other == 0 %}
                                    <td data-path="{{cloud.group_name}} jobs_other" class="zero-style plottable">0</td>
                                {% else %}
                                    <td data-path="{{cloud.group_name}} jobs_other" class="more-style plottable"><a href="#">{{cloud.Other}}</a></td>
                                {% endif %}

                            </tr>
                        {% endif %}
                    {% endfor %}

                    <tr class="bottom-row">
                        <td colspan="7"></td>
                    </tr>

                    </tbody> 
                </table>

            </div>



            <!--
            https://codepen.io/istro/pen/daker 
            https://codersblock.com/blog/checkbox-trickery-with-css/
            -->

            <!--
            <input id="how-other" name="how" type="radio">
            <label for="how-other" class="side-label">Other...</label>

            <div class="how-other-disclosure">
              <label for="how-other-explain" class="top-label">Please explain</label>
              <textarea id="how-other-explain"></textarea>
            </div>
            -->



            <br>
            {% set VMstotal = 0 %}
            {% set VMs_foreign_total = 0 %}
            <div class="status-table">
                <input class="toggle-box" id="toggle-row" type="checkbox" autocomplete="on"></input>
                <table>
                  <colgroup>
                    <col class="clear" span="1"/>
                    <col class="grey" span="1"/>
                    <col class="clear" span="22"/>
                  </colgroup>
                    <tr class="header-row">
                        <th class="group-name jobs-style">Group</th>
                        
                        <th class="name-style">Clouds</th>
                        <th class="native-style">VMs</th>
                        <th class="native-style">Starting</th>
                        <th class="native-style">Unreg.</th>
                        <th class="native-style">Idle</th>                
                        <th class="native-style">Running</th>
                        <th class="native-style">Retiring</th>
                        <th class="native-style">Manual</th>
                        <th class="native-style">Error</th>

                        <th class="col-spacer">&nbsp;</th>


                        <th class="native-style" colspan="2">
                            <table>
                                <tr colspan="2">Native Cores</tr>
                                <tr>
                                    <th>Used</th>
                                    <th>Limit</th>
                                </tr>
                            </table>
                        </th>
                        <th class="native-style">RAM</th>

                        <th class="col-spacer">&nbsp;</th>

                        <th class="foreign-style">Foreign<br>VMs</th>
                        <th class="foreign-style">Foreign<br>Cores</th>
                        <th class="foreign-style">RAM</th>

                        <th class="col-spacer">&nbsp;</th>


                        <th class="total-style" colspan="2">
                            <table>
                                <tr colspan="2">Global Cores</tr>
                                <tr>
                                    <th>Used</th>
                                    <th>Quota</th>
                                </tr>
                            </table>
                        </th>
                        <th class="total-style">RAM</th>


                        <th class="col-spacer">&nbsp;</th>

                        <th class="native-style">Slots</th>
                        <th class="native-style" colspan="2">
                            <table>
                                <tr colspan="2">Slot Cores</tr>
                                <tr>
                                    <th>Busy</th>
                                    <th>Idle</th>
                                </tr>
                            </table>
                        </th>

                        <!--
                        <th class="native-style">Slots<br>Used Cores</th>
                        <th class="native-style">Slots<br>Idle Cores</th>
                        -->
                    </tr>
                    {% set prev_name == '' %}
                    {% for cloud in cloud_status_list %}
                        
                        {% if global_flag or not global_flag and cloud.group_name == active_group %}
                            {% if cloud.enabled == 1 or cloud.VMs > 0 %}
                                {% comment %}
                                    {% if not forloop.counter0 == 0 and not prev_name == cloud.group_name %}
                                        <tr>
                                            <td colspan="10" class="row-spacer">&nbsp;</td>
                                            <td class="col-spacer">&nbsp;</td>
                                            <td colspan="3" class="row-spacer">&nbsp;</td>
                                            <td class="col-spacer">&nbsp;</td>
                                            <td colspan="3" class="row-spacer">&nbsp;</td>
                                            <td class="col-spacer">&nbsp;</td>
                                            <td colspan="3" class="row-spacer">&nbsp;</td>
                                            <td class="col-spacer">&nbsp;</td>
                                            <td colspan="3" class="row-spacer">&nbsp;</td>
                                        </tr>
                                    {% endif %}
                                    {% set prev_name = cloud.group_name %}
                                {% endcomment %}
                                <tr>
                                    <td class="group-name bold-style">{{cloud.group_name}}</td>

                                    <!-- <td class="col-spacer">&nbsp;</td> -->

                                {% if cloud.enabled == 1 %}
                                    <td class="bold-style">
                                {% else %}
                                    <td class="disabled-style">
                                {% endif %}
                                    {{cloud.cloud_name}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::::')" href="#vms-overlay">--></td>

                                    {% if cloud.VMs == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs" class="more-style plottable">{{cloud.VMs}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::native::')" href="#vms-overlay">--></td>
                                    {% endif %}

                                    {% if cloud.VMs_starting == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_starting" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_starting" class="more-style plottable">{{cloud.VMs_starting}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::starting::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_unregistered == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_unregistered" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_unregistered" class="more-style plottable">{{cloud.VMs_unregistered}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::unregistered::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_idle == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_idle" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_idle" class="more-style plottable">{{cloud.VMs_idle}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::idle::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_running == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_running" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_running" class="more-style plottable">{{cloud.VMs_running}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::running::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_retiring == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_retiring" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_retiring" class="more-style plottable">{{cloud.VMs_retiring}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::retiring::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_manual == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_manual" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_manual" class="more-style plottable">{{cloud.VMs_manual}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::manual::')" href="#vms-overlay">--></td>
                                    {% endif %}


                                    {% if cloud.VMs_in_error == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_in_error" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} VMs_in_error" class="more-style plottable">{{cloud.VMs_in_error}}<!--<a onclick="pass_url('{{cloud.cloud_name}}::error::')" href="#vms-overlay">--></td>
                                    {% endif %}



                                    <td class="col-spacer">&nbsp;</td>


                                    {% if cloud.cores_native == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_native" class="zero-style plottable">0</td>
                                    {% elif cloud.cores_ctl == -1 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_native" class="sysctl-style plottable">{{cloud.cores_native}}</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_native" class="manual-style plottable">{{cloud.cores_native}}</td>
                                    {% endif %}

                                    {% if cloud.cores_limit == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_limit" class="zero-style plottable">0</td>
                                    {% elif cloud.cores_ctl == -1 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_limit" class="sysctl-style plottable">{{cloud.cores_limit}}</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_limit" class="manual-style plottable">{{cloud.cores_limit}}</td>
                                    {% endif %}
                                    
                                    <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} ram_native" class="plottable">
                                        {% with total=cloud.ram_quota %}
                                            <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_native }}"></meter>
                                        {% endwith %}
                                    </td>


                                    <td class="col-spacer">&nbsp;</td>


                                    {% if cloud.Foreign_VMs == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} Foreign_VMs" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} Foreign_VMs" class="more-style plottable">{{ cloud.Foreign_VMs }}<!--<a onclick="pass_url('{{cloud.cloud_name}}::foreign::')" href="#vms-overlay">--></td>
                                    {% endif %}



                                    {% if cloud.cores_foreign == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_foreign" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_foreign" class="more-style plottable">{{ cloud.cores_foreign }}</a></td>
                                    {% endif %}

                                    <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} ram_foreign" class="plottable">
                                        {% with total=cloud.ram_quota %}
                                            <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_foreign }}"></meter>
                                        {% endwith %}
                                    </td>

                                    <td class="col-spacer">&nbsp;</td>


                                    <!--******************************-->
                                    {% if cloud.cores_native_foreign == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_native_foreign" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_native_foreign" class="more-style plottable">{{ cloud.cores_native_foreign }}</a></td>
                                    {% endif %}
                                    <!--******************************-->


                                    {% if cloud.cores_max == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_quota" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} cores_quota" class="more-style plottable">{{ cloud.cores_quota }}</a></td>
                                    {% endif %}

                                    <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} ram_native_foreign" class="plottable">
                                        {% with total=cloud.ram_quota %}
                                            <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{cloud.ram_quota}}" value="{{ cloud.ram_native_foreign }}"></meter>
                                        {% endwith %}                        
                                    </td>

                                    <td class="col-spacer">&nbsp;</td>

                                    {% if cloud.slot_count == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_count" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_count" class="more-style plottable">{{cloud.slot_count}}</td>
                                    {% endif %}


                                    {% if cloud.slot_core_count == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_core_count" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_core_count" class="more-style plottable">{{cloud.slot_core_count}}</td>
                                    {% endif %}

                                    {% if cloud.slot_idle_core_count == 0 %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_idle_core_count" class="zero-style plottable">0</td>
                                    {% else %}
                                        <td data-path="{{cloud.group_name}} {{cloud.cloud_name}} slot_idle_core_count" class="more-style plottable">{{cloud.slot_idle_core_count}}</td>
                                    {% endif %}

                                    

                                </tr>



                                <tr class="extra-row">
                                    <td></td>
                                    <td>
                                        {% if cloud.enabled == 0 %}
                                            Cloud disabled
                                        {% endif %}
                                        <!--<a href="{{cloud.url}}">&#x2601;</a>-->
                                    </td>
                                    <td>
                                    {% if cloud.VMs > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_starting > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::starting::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_unregistered > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::unregistered::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_idle > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::idle::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_running > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::running::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_retiring > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::retiring::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_manual > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::manual::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>

                                    <td>
                                    {% if cloud.VMs_in_error > 0 %}
                                        <a onclick="pass_url('{{cloud.cloud_name}}::error::')" href="#vms-overlay">&#x2637;</a>
                                    {% endif %}
                                    </td>




                                    <td class="col-spacer">&nbsp;</td>

                                    <td colspan="2">
                                    {% if cloud.cores_ctl == -1 %}
                                        <p>System limit</p>
                                    {% else %}
                                        <p>User limit</p>
                                    {% endif %}
                                    </td>
                                    <td>
                                        {% with ram=cloud.ram_native total=cloud.ram_quota %}
                                            {% if cloud.ram_quota > 1048576 %}
                                                {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                            {% else %}
                                                {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                            {% endif %}
                                        {% endwith %}
                                    </td>

                                    <td class="col-spacer">&nbsp;</td>

                                    <td><!--Foreign VMs--></td>
                                    <td><!--Foreign Cores--></td>
                                    <td>
                                        {% with ram=cloud.ram_foreign total=cloud.ram_quota %}
                                            {% if cloud.ram_quota > 1048576 %}
                                                {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                            {% else %}
                                                {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                            {% endif %}
                                        {% endwith %}
                                    </td>
                                    <td class="col-spacer">&nbsp;</td>

                                    <td><!--Total Cores--></td>
                                    <td><!--Cores Quota--></td>
                                    <td>
                                        {% with ram=cloud.ram_native_foreign total=cloud.ram_quota %}
                                            {% if cloud.ram_quota > 1048576 %}
                                                {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                            {% else %}
                                                {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                            {% endif %}
                                        {% endwith %}
                                    </td>
                                    <td class="col-spacer">&nbsp;</td>

                                    <td colspan="2">
                                        <table>
                                        {% for slot in slot_list%}
                                            {% if slot.group_name == active_group and slot.cloud_name == cloud.cloud_name %}
                                                <tr>
                                                    <td>{{ slot.slot_count }}&#10005;{{ slot.slot_type }}c</td>
                                                    <td>{{ slot.core_count }}@{{ slot.slot_id }}</td>
                                                </tr>
                                            {% endif %}
                                        {% endfor %}
                                        </table>
                                    </td>
                                    <td><!--Idle--></td>

                                </tr>

                            {% endif %}
                        {% endif %}

                    {% endfor %}
                    <!--
                    {% for cloud in cloud_status_list %}
                        {% if cloud.enabled == 0 and cloud.VMs == 0 %}
                            <tr class="extra-row">
                                <td class="disabled-style">{{cloud.cloud_name}}</td>
                                <td colspan="22"><h3>--- disabled ---</h3></td>
                            </tr>        

                        {% endif %}
                    {% endfor %}
                    -->
                    
                    <tr>
                        <td colspan="10" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                    </tr>


                    {% if not global_flag %}
                        {% set group_total = cloud_total_list %}
                        {% set group_name = cloud_total_list.group_name %}
                    {% else %}
                        {% set group_total = global_total_list %}
                        {% for group in user_groups %}
                            <input type='hidden' name='groups_total' value={{group}} />
                        {% endfor %}
                        {% set group_name = "groups_total" %}
                    {% endif %}

                        {% comment %} 
                            {% for group_total in total_list %}
                                {% if group_total.group_name == active_group %}
                                {% for group_total in cloud_total_list %}{% if global_flag or not global_flag and group_total.group_name == active_group %} 
                                {% if group_total.group_name == active_group %}
                        {% endcomment %}
                     <tr>
                        <td colspan="1" class="row-spacer">&nbsp;</td>
                        <td class="bold-style">Totals</td>

                        {% if group_total.VMs == 0 %}
                            <td data-path="{{group_name}} VMs_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_total" class="more-style plottable">{{group_total.VMs}}<!--<a onclick="pass_url('::native::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_starting == 0 %}
                            <td data-path="{{group_name}} VMs_starting_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_starting_total" class="more-style plottable">{{group_total.VMs_starting}}<!--<a onclick="pass_url('::starting::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_unregistered == 0 %}
                            <td data-path="{{group_name}} VMs_unregistered_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_unregistered_total" class="more-style plottable">{{group_total.VMs_unregistered}}<!--<a onclick="pass_url('::unregistered::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_idle == 0 %}
                            <td data-path="{{group_name}} VMs_idle_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_idle_total" class="more-style plottable">{{group_total.VMs_idle}}<!--<a onclick="pass_url('::idle::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_running == 0 %}
                            <td data-path="{{group_name}} VMs_running_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_running_total" class="more-style plottable">{{group_total.VMs_running}}<!--<a onclick="pass_url('::running::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_retiring == 0 %}
                            <td data-path="{{group_name}} VMs_retiring_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_retiring_total" class="more-style plottable">{{group_total.VMs_retiring}}<!--<a onclick="pass_url('::retiring::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_manual == 0 %}
                            <td data-path="{{group_name}} VMs_manual_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_manual_total" class="more-style plottable">{{group_total.VMs_manual}}<!--<a onclick="pass_url('::manual::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.VMs_in_error == 0 %}
                            <td data-path="{{group_name}} VMs_in_error_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} VMs_in_error_total" class="more-style plottable">{{group_total.VMs_in_error}}<!--<a onclick="pass_url('::error::')" href="#vms-overlay">--></td>
                        {% endif %}



                        <td class="col-spacer">&nbsp;</td>


                        {% if group_total.cores_native == 0 %}
                            <td data-path="{{group_name}} cores_native_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} cores_native_total" class="more-style plottable">{{group_total.cores_native}}</td>
                        {% endif %}

                        {% if group_total.cores_limit == 0 %}
                            <td data-path="{{group_name}} cores_limit_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} cores_limit_total" class="more-style plottable">{{group_total.cores_limit}}</td>
                        {% endif %}
                            <td data-path="{{group_name}} ram_native_total" class="plottable">
                                {% with total=group_total.ram_quota %}
                                    <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{group_total.ram_quota}}" value="{{ group_total.ram_native }}"></meter>
                                {% endwith %}
                            </td>

                        <td class="col-spacer">&nbsp;</td>

                        {% if group_total.Foreign_VMs == 0 %}
                            <td data-path="{{group_name}} Foreign_VMs_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} Foreign_VMs_total" class="more-style plottable">{{group_total.Foreign_VMs}}<!--<a onclick="pass_url('::foreign::')" href="#vms-overlay">--></td>
                        {% endif %}


                        {% if group_total.cores_foreign == 0 %}
                            <td data-path="{{group_name}} cores_foreign_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} cores_foreign_total" class="more-style plottable">{{group_total.cores_foreign}}</td>
                        {% endif %}

                            <td data-path="{{group_name}} ram_foreign_total" class="plottable">
                                {% with total=group_total.ram_quota %}
                                    <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{group_total.ram_quota}}" value="{{ group_total.ram_foreign }}"></meter>
                                {% endwith %}
                            </td>

                        <td class="col-spacer">&nbsp;</td>
                        <!--*******************************************************-->
                        <td data-path="{{group_name}} cores_native_foreign_total" class="more-style bold-style plottable">{{group_total.cores_native_foreign}}</td>
                        <!--*******************************************************-->

                        <td data-path="{{group_name}} cores_quota_total" class="more-style bold-style plottable">{{group_total.cores_quota}}</td>

                        <td data-path="{{group_name}} ram_native_foreign_total" class="plottable">
                            {% with total=group_total.ram_quota %}
                                <meter class="ram-meter" min="0" low="0" optimum="{{total|mul:0.5}}" high="{{total|mul:0.9}}" max="{{group_total.ram_quota}}" value="{{ group_total.ram_native_foreign }}"></meter>
                            {% endwith %}
                        </td>

                        <td class="col-spacer">&nbsp;</td>

                        {% if group_total.slot_count == 0 %}
                            <td data-path="{{group_name}} slot_count_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} slot_count_total" class="more-style plottable">{{group_total.slot_count}}</td>
                        {% endif %}


                        {% if group_total.slot_core_count == 0 %}
                            <td data-path="{{group_name}} slot_core_count_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} slot_core_count_total" class="more-style plottable">{{group_total.slot_core_count}}</td>
                        {% endif %}

                        {% if group_total.slot_idle_core_count == 0 %}
                            <td data-path="{{group_name}} slot_idle_core_count_total" class="zero-style plottable">0</td>
                        {% else %}
                            <td data-path="{{group_name}} slot_idle_core_count_total" class="more-style plottable">{{group_total.slot_idle_core_count}}</td>
                        {% endif %}

                    </tr>


                    <tr class="extra-row">
                        <td colspan="1" class="row-spacer">&nbsp;</td>
                        <td></td>

                        <td>
                        {% if group_total.VMs > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_starting > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::starting::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_unregistered > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::unregistered::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_idle > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::idle::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_running > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::running::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_retiring > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::retiring::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_manual > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::manual::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>

                        <td>
                        {% if group_total.VMs_in_error > 0 %}
                            <a onclick="pass_url('{{group_total.cloud_name}}::error::')" href="#vms-overlay">&#x2637;</a>
                        {% endif %}
                        </td>




                        <td class="col-spacer">&nbsp;</td>

                        <td><!--Used Cores--></td>
                        <td><!--Cores Limit--></td>
                        <td>
                            {% with ram=group_total.ram_native total=group_total.ram_quota %}
                                {% if group_total.ram_quota > 1048576 %}
                                    {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                {% else %}
                                    {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                {% endif %}
                            {% endwith %}
                        </td>
                        <td class="col-spacer">&nbsp;</td>

                        <td><!--Foreign VMs--></td>
                        <td><!--Foreign Cores--></td>
                        <td>
                            {% with ram=group_total.ram_foreign total=group_total.ram_quota %}
                                {% if group_total.ram_quota > 1048576 %}
                                    {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                {% else %}
                                    {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                {% endif %}
                            {% endwith %}                    
                        </td>
                        <td class="col-spacer">&nbsp;</td>

                        <td><!--Total Cores--></td>
                        <td><!--Cores Quota--></td>
                        <td>
                            {% with ram=group_total.ram_native_foreign total=group_total.ram_quota %}
                                {% if group_total.ram_quota > 1048576 %}
                                    {{ ram|div:1048576|floatformat:1}} / {{ total|div:1048576|floatformat:1 }} TB
                                {% else %}
                                    {{ ram|div:1024|floatformat:1 }} / {{ total|div:1024|floatformat:1 }} GB
                                {% endif %}
                            {% endwith %}                    
                        </td>
                        <td class="col-spacer">&nbsp;</td>

                        <td colspan="2">
                            <table>
                            {% for slot in slot_total_list%}
                                {% if slot.group_name == active_group and slot.cloud_name == group_total.cloud_name %}
                                    <tr>
                                        <td>{{ slot.slot_count }}&#10005;{{ slot.slot_type }}c</td>
                                        <td>{{ slot.core_count }}@{{ slot.slot_id }}</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                            </table>
                        </td>
                        <td><!--Idle--></td>


                    <tr class="bottom-row">
                        <td colspan="10" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                        <td class="col-spacer">&nbsp;</td>
                        <td colspan="3" class="row-spacer">&nbsp;</td>
                    </tr>
                    {% comment %}
                        {% endif %}
                        {% endfor %}
                    {% endcomment %}
                    </tbody> 
                </table>
            </div>
    </div>

    {% comment %}
        {% endif %}
        {% if not global_flag%}
            {% set index = -1 %}
        {% else %}
            {% set index += 1 %}
        {% endif %}
        {% endfor %}
    {% endcomment %}

</div>

<!--<div>Icons made by <a href="https://www.flaticon.com/authors/those-icons" title="Those Icons">Those Icons</a> from <a href="https://www.flaticon.com/"              title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/"              title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>-->

<div class="system-div">
    <table class="system-services" id="system-services">
        <!--<colgroup>
        <col class="red" span="1" />
        <col class="clear" span="5" />

        </colgroup>-->
            <tr>
                <th colspan="7">CS system services</th>
                <th class="col-spacer">&nbsp;</th>
                <th colspan="4">CS system resources</th>
            </tr>

            <tr>
                <td data-path="csv2_status_status" class="plottable" tooltip="{{ system_list.csv2_status_msg }}">
                {% if system_list.csv2_status_status == 1 %}
                    <!--<img src="{% static "csv2/running.svg" %}" alt="Running">-->
                    <span class="green-symbol">&#x2714;</span>
                    </td>
                {% else %}
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}

                <td data-path="csv2_main_status" class="plottable" tooltip="{{ system_list.csv2_main_msg }}">
                {% if system_list.csv2_main_status == 1 %}
                    <span class="green-symbol">&#x2714;</span></td>
                {% else %}
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}

                <td data-path="mariadb_status" class="plottable" tooltip="{{ system_list.mariadb_msg }}">
                {% if system_list.mariadb_status == 1 %}
                    <span class="green-symbol">&#x2714;</span></td>
                {% else %}
                    <span class="red-symbol">&#x2718;</span>
                    </td>
                {% endif %}


                {% if system_list.csv2_openstack_status == 1 and system_list.csv2_openstack_error_count == 0%}
                    <td data-path="csv2_openstack_status" class="plottable" tooltip="{{ system_list.csv2_openstack_msg }}">
                    <span class="green-symbol">&#x2714;</span></td>
                {% elif system_list.csv2_openstack_status == 1 and system_list.csv2_openstack_error_count != 0%}
                    <td data-path="csv2_openstack_status" class="plottable" tooltip="Warning! {{system_list.csv2_openstack_error_count}} child process failures. {{ system_list.csv2_openstack_msg }}">
                    <span class="orange-symbol">&#x2757;</span></td>
                {% else %}
                    <td data-path="csv2_openstack_status" class="plottable" tooltip="{{ system_list.csv2_openstack_msg }}">
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}


                {% if system_list.csv2_jobs_status == 1 and system_list.csv2_jobs_error_count == 0%}
                    <td data-path="csv2_jobs_status" class="plottable" tooltip="{{ system_list.csv2_jobs_msg }}">
                    <span class="green-symbol">&#x2714;</span></td>
                {% elif system_list.csv2_jobs_status == 1 and system_list.csv2_jobs_error_count != 0%}
                    <td data-path="csv2_jobs_status" class="plottable" tooltip="Warning! {{system_list.csv2_jobs_error_count}} child process failures. {{ system_list.csv2_jobs_msg }}">
                    <span class="orange-symbol">&#x2757;</span></td>
                {% else %}
                    <td data-path="csv2_jobs_status" class="plottable" tooltip="{{ system_list.csv2_jobs_msg }}">
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}


                {% if system_list.csv2_machines_status == 1 and system_list.csv2_machines_error_count == 0%}
                    <td data-path="csv2_machines_status" class="plottable" tooltip="{{ system_list.csv2_machines_msg }}">
                    <span class="green-symbol">&#x2714;</span></td>
                {% elif system_list.csv2_machines_status == 1 and system_list.csv2_machines_error_count != 0%}
                    <td data-path="csv2_machines_status" class="plottable" tooltip="Warning! {{system_list.csv2_machines_error_count}} child process failures. {{ system_list.csv2_machines_msg }}">
                    <span class="orange-symbol">&#x2757;</span></td>
                {% else %}
                    <td data-path="csv2_machines_status" class="plottable" tooltip="{{ system_list.csv2_machines_msg }}">
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}


                {% if system_list.csv2_timeseries_status == 1 and system_list.csv2_timeseries_error_count == 0%}
                    <td data-path="csv2_timeseries_status" class="plottable" tooltip="{{ system_list.csv2_timeseries_msg }}">
                    <span class="green-symbol">&#x2714;</span></td>
                {% elif system_list.csv2_timeseries_status == 1 and system_list.csv2_timeseries_error_count != 0%}
                    <td data-path="csv2_timeseries_status" class="plottable" tooltip="Warning! {{system_list.csv2_timeseries_error_count}} child process failures. {{ system_list.csv2_timeseries_msg }}">
                    <span class="orange-symbol">&#x2757;</span></td>
                {% else %}
                    <td data-path="csv2_timeseries_status" class="plottable" tooltip="{{ system_list.csv2_timeseries_msg }}">
                    <span class="red-symbol">&#x2718;</span></td>
                {% endif %}



                <td class="col-spacer">&nbsp;</td>

                <td data-path="load" class="plottable" tooltip="{{ system_list.load }}%"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.load }}"></meter></td>

                <td data-path="ram_used" class="plottable" tooltip="{{ system_list.ram_used }} / {{ system_list.ram_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.ram }}"></meter></td>
 
                <td data-path="swap_used" class="plottable" tooltip="{{ system_list.swap_used }} / {{ system_list.swap_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.swap }}"></meter></td>

                <td data-path="disk_used" class="plottable" tooltip="{{ system_list.disk_used }} / {{ system_list.disk_size }} GB"><meter min="0" low="0" optimum="50" high="80" max="100" value="{{ system_list.disk }}"></meter></td>

            </tr>
            <tr>
                <td>status</td>
                <td>main</td>
                <td>database</td>
                <td>openstack</td>
                <td>jobs</td>
                <td>machines</td>
                <td>timeseries</td>

                <td class="col-spacer">&nbsp;</td>


                <td>LOAD</td>
                <td>RAM</td>
                <td>SWAP</td>
                <td>DISK</td>
            </tr>



        </tbody> 
    </table>

    <div class="refresh-button">
        <span id="CDTimer"></span>
        <!--<span class="reload-symbol" onClick="window.location.reload()">&#x27f3;</span>-->
        <span class="stop-symbol" onClick="stop_refresh()">&#x270b;</span>
        <!--<img src="{% static "csv2/refresh.svg" %}" alt="Refresh now" onClick="window.location.reload()"> 
        <img src="{% static "csv2/stop.svg" %}" alt="Stop refresh" onClick="stop_refresh()">-->
    </div>
</div>




<div id="vms-overlay" class="overlay">
    <div class="popup">
        <a class="close" id="timer-count" onclick="set_refresh(refresh_interval*1000)" href="#">&times;</a>
        <iframe id="vms-iframe" class="content" src=""></iframe>
    </div>
</div>

<!-- Plotly.js -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


<script type="text/javascript" src="{% static "csv2/status.js" %}"></script>
<script type="text/javascript">
	/*Add event listeners once page loads*/
	initialize();
	addEventListeners("range");
	sessionStorage.clear();

	/*<![CDATA[*/
    var TimerVal = refresh_interval;/*
	var TimerVal = 30;*/
	var TimerSPan = document.getElementById("CDTimer");
	set_refresh(refresh_interval*1000);/*
    set_refresh(30000);*/
	function CountDown(){
	setTimeout( "CountDown()", 1000 );
	TimerSPan.innerHTML=TimerVal;
	if(TimerSwitch == 1){TimerVal=TimerVal-1;}
	if (TimerVal<0) { TimerVal=0 }
	} CountDown();
	/*]]>*/
 </script>


</body>
</html>
