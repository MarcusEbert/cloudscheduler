<head>
<meta http-equiv="refresh" content="60">
{% load static %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="{% static "csv2/common.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "csv2/clouds.css" %}">
<link rel="stylesheet" href="/static/glintwebui/css/glint_button.css">
<link rel="stylesheet" href="/static/glintwebui/css/glint_header_footer.css">
<link rel="stylesheet" href="/static/glintwebui/css/glint_matrix.css">
<link rel="stylesheet" href="/static/glintwebui/css/glint_dropdown_button.css">

<style>

{% load glint_template_utils %}

</style>
</head>
{% block navbar %}
    {% include "csv2/navigation_bar.html" %}
{% endblock %}
<div class="wrapper" style="padding-top:60px">
    <input class="button greenbutton" style="height:44px;" type="submit" onclick="submitKeyMatrix()" value="Submit Changes" />
<div class="image_matrix">
    <form id="keypair_form" name="keypair_form" action="/images/save_keypairs/{{active_group}}/" method="post">
    {% csrf_token %}
    <table>
        <tr>
            <th>Keypairs</th>
            {% for cloud in group_resources %}
                <th>{{cloud.cloud_name}}</th>
            {% endfor %}
        </tr>
        {% for key in fingerprint_dict %}
            <tr>
                <th>
                    {{fingerprint_dict|get_item:key|get_item:"name"}}
                </th>
                {% for cloud in group_resources %}
                    {% if fingerprint_dict|get_item:key|get_item:cloud.cloud_name %}
                        <td class="{{key}}"><input name="{{cloud.cloud_name}}" type="checkbox" value="{{key}}" checked></td>
                    {% else %}
                        <td class="{{key}}"><input name="{{cloud.cloud_name}}" type="checkbox" value="{{key}}" ></td>
                    {% endif %}
                {% endfor %}
            </tr>
        {% endfor %}
    </table>
</form></div>
</div>


function submitKeyMatrix(){
    document.getElementById("keypair_form").submit();
}