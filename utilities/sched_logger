#!/bin/bash
    pw_line=$(grep db_password /etc/cloudscheduler/cloudscheduler.yaml)
    pw_words=($pw_line)
    echo
    date
#   mysql -ucsv2 -p${pw_words[1]:1:-1} -t -e "select 'resources',group_name,cloud_name,flavor,flavor_cores,flavor_disk,flavor_ram,flavor_swap,flavor_slots from view_t0; select 'jobs',group_name,target_clouds,instance_type, concat(request_cpus_min, '/', request_cpus_max, '/', request_cpus_total) as 'CPUs Min/Max/Total', concat(request_disk_min, '/', request_disk_max, '/', request_disk_total) as 'Disk Min/Max/Total', concat(request_ram_min, '/', request_ram_max, '/', request_ram_total) as 'RAM Min/Max/Total', concat(request_swap_min, '/', request_swap_max, '/', request_swap_total) as 'Swap Min/Max/Total', flavors,idle,running from view_groups_of_idle_jobs;" csv2
    mysql -ucsv2 -p${pw_words[1]:1:-1} -t -e "select 'resources',group_name,cloud_name,flavor,flavor_cores,flavor_disk,flavor_ram,flavor_swap,flavor_slots from view_t0; select 'jobs',group_name,target_clouds,instance_type, concat(request_cpus_min, '/', request_cpus_max, '/', request_cpus_total) as 'CPUs Min/Max/Total', concat(request_disk_min, '/', request_disk_max, '/', request_disk_total) as 'Disk Min/Max/Total', concat(request_ram_min, '/', request_ram_max, '/', request_ram_total) as 'RAM Min/Max/Total', concat(request_swap_min, '/', request_swap_max, '/', request_swap_total) as 'Swap Min/Max/Total', flavors,idle,running from view_t1;" csv2
